<%
    var keywords = '';
    var description = '';
    var author = page.author || config.author;
    if (config.keywords) {
        keywords += config.keywords;
    }
    if (page.keywords) {
        if (keywords != '') keywords += ', ';
        keywords += page.keywords;
    }
    if (config.description) {
        description += config.description;
    }
    if (is_post()) {
        if (page.description) {
            description = page.description;
        } else {
            description = truncate(strip_html(page.content), 100);
        }
    }
%>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html">
    <meta http-equiv="charset" content="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title><%= page_title() %></title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <%- keywords ? `<meta name="keywords" content="${keywords}">` : null %>
    <%- description ? `<meta name="description" content="${description}">` : null %>
    <%- author ? `<meta name="author" content="${author}">` : null %>
    <%- theme.favicon.small ? `<link rel="icon" href="${theme.favicon.small}" type="image/png" sizes="32x32">` : null %>
    <%- theme.favicon.medium ? `<link rel="icon" href="${theme.favicon.medium}" type="image/png" sizes="48x48">` : null %>
    <%- theme.favicon.apple_touch_icon ? `<link rel="apple-touch-icon" href="${theme.favicon.apple_touch_icon}" sizes="180x180">` : null %>
    <%- theme.favicon.safari_pinned_tab ? `<meta rel="mask-icon" href="${theme.favicon.safari_pinned_tab}" color="#333333">` : null %>
    <% if (theme.favicon.msapplication) { %>
        <meta rel="msapplication-TileImage" content="<%- theme.favicon.msapplication %>">
        <meta rel="msapplication-TileColor" content="#000000">
    <% } %>
    <%- css(['css/style']) %>
    <% if (theme.vendors.iconfont_css) { %>
        <%- css(theme.vendors.iconfont_css) %>
    <% } %>
    <% if (theme.fancybox) { %>
        <%- theme.vendors.fancybox_css ? css(theme.vendors.fancybox_css) : css('lib/fancybox/fancybox.css') %>
    <% } %>
    <% if(theme.highlight.enable) { %>
        <% if(theme.vendors.highlight_css) { %>
            <% for (i in theme.highlight.style) { %>
                <% style = theme.highlight.style[i].toLowerCase().replace(/(?<!([0-9]))\s(?!([0-9]))/g, '-').replace(/\s/g, '') %>
                <%- css({href: theme.vendors.highlight_css + style + '.min.css', name: 'highlight-style', mode: i}) %>
            <% } %>
        <% } else { %>
        <%- css('lib/highlight/a11y-dark.css')%>
        <% } %>
    <% } %>
    <%- partial('_partial/globaldefs') %>
    <% if (theme.custom.head) { %>
        <%- theme.custom.head %>
    <% } %>
    <% if (theme.custom.css) { %>
        <%- css(theme.custom.css) %>
    <% } %>
    <%- theme.vendors.jquery_js ? js(theme.vendors.jquery_js) : js('lib/jquery/jquery.js') %>
</head>
